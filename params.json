{"name":"CombineArchive","tagline":"Libraries and Tools for accessing the COMBINE archive","body":"# COMBINE Archive\r\nIn this project I keep a prototype library and a couple of applications that make working with the archive easier. This project contains of three parts: `LibCombine`, a library reading the format, `CombineCLI` a command line application and `FormsCombineArchive` that represents the information in a UI. At this point mostly the library is in use. \r\n\r\n## Library\r\nThe main class of the library is `CombineArchive`, you can construct new classes, and add local documents to it before saving it, or load existing ones, and browse through the contents. If you want to get hold of the manifest document, call the `.ToXML()` method.\r\n\r\n\r\n### How to use\r\nSimply reference `LibCombine.dll` in your project, ensure that the file `ICSharpCode.SharpZipLib.dll` is also available, and you are ready to call the library. \r\n\r\n### OmexDescription\r\nApart from that the library features an `OmexDescription` description class, that can be used by those that don't have a proper RDF library handy, with it you could create the description for an element like so: \r\n\r\n \t\t\tvar desc =\r\n                new OmexDescription\r\n                {\r\n                    About = \"./test.xml\",\r\n                    Description = \"Some Description about the file\",\r\n                    Creators =\r\n                        new List<VCard> \r\n                        { \r\n                            new VCard \r\n                            { \r\n                                FamilyName = \"Bergmann\", \r\n                                GivenName = \"Frank\", \r\n                                Email = \"fbergman@caltech.edu\", \r\n                                Organization = \"California Institute of Technology\" \r\n                            } \r\n                        },\r\n                    Created = DateTime.Parse(\"2013-04-04 16:00+1\")\r\n                };\r\n\r\nTo write that to an XML string, use the `ToXML` method. Conversely to parse from file or string, use the functions: \r\n\r\n\t\tvar list = OmexDescription.ParseString(xmlString);\r\n\r\nor: \r\n\r\n\t\tvar list = OmexDescription.ParseFile(fileName);\r\n\r\n\r\n### Creating a New Archive\r\nThe following is an example on how I would create a new `omex` file, by bundling a local SBML file and accompabying paper together with a reference to the [BioModel](http://biomodels.net/biomodel). First I define a `BaseDirectory` that serves as a root for my archive later on, and then I add a number of files: \r\n\r\n             var newArchive = new CombineArchive\r\n             {\r\n                 BaseDir = @\"C:\\Users\\fbergmann\\Documents\\SBML Models\\\",\r\n                 Descriptions = new List<OmexDescription> { \r\n                     new OmexDescription\r\n                {\r\n                    About = \"./BorisEJB.xml\",\r\n                    Description = \"original JDesigner model for Kholodenko2000 - MAPK feedback\",\r\n                    Creators =\r\n                        new List<VCard> \r\n                        { \r\n                            new VCard \r\n                            { \r\n                                FamilyName = \"Bergmann\", \r\n                                GivenName = \"Frank\", \r\n                                Email = \"fbergman@caltech.edu\", \r\n                                Organization = \"California Institute of Technology\" \r\n                            } \r\n                        },\r\n                    Created = DateTime.Parse(\"2013-04-04 16:00+1\")\r\n                }\r\n                 },\r\n                 Entries = new List<Entry> { \r\n                     new Entry { Location = \"./BorisEJB.xml\", Format = Entry.KnownFormats[\"sbml\"] }, \r\n                     new Entry { Location = \"./paper/Kholodenko2000.pdf\", Format = Entry.KnownFormats[\"pdf\"] }, \r\n                     new Entry { Location = \"http://www.ebi.ac.uk/biomodels-main/BIOMD0000000010\", Format = Entry.KnownFormats[\"sbml\"] }, \r\n                 }\r\n             };\r\n\r\n             newArchive.SaveTo(@\"C:\\Users\\fbergmann\\Desktop\\Boris.omex\");\r\n\r\n### Finding out what is in a COMBINE Archive\r\nSuppose I would get a COMBINE archive, how would I find out about its contents? First you load the file: \r\n\r\n\tvar omex = CombineArchive.FromFile(@\"C:\\Users\\fbergmann\\Desktop\\Boris.omex\");\r\n\r\nAnd then you would interrogate it by asking for its `Entries` property. Usually it will be the case that your application will only handle some of the COMBINE standards. In that case you want to use the methods: \r\n\r\n\t// get the number of SBML files in the archive\r\n\tomex.GetNumFilesWithFormat(\"sbml\") \r\n\r\n    // get the local filenames to them \r\n    omex.GetFilesWithFormat(\"sbml\")\r\n\r\n    // get the actual entries\r\n    omex.GetEntriesWithFormat(\"sbml\")\r\n\r\nSince there can be any number of files in the archive, I use the convention, that the first `OmexDescription` in the metadata file represents the `MainFile` the name of which you can get through the according property.\r\n\r\nUsing the `Entry` objects directly has the advantage, that you can *open* the files, in whatever application is associated with it, or read the contents either in form of `byte[]` or strings. Just as example, to open the PDF file encoded in the file above one could use these lines: \r\n\r\n             var omex = CombineArchive.FromFile(@\"C:\\Users\\fbergmann\\Desktop\\Boris.omex\");\r\n\r\n             if (omex.HasEntriesWithFormat(\"pdf\"))\r\n                 omex.GetEntriesWithFormat(\"PDF\").First().OpenLocation();\r\n\r\nHere `GetEntriesWithFormat` returns a list of all PDFs, `First()` gives us the first entry, and `OpenLocation` opens the file. \r\n\r\n\r\n## The Format\r\nFrequently we are faced with project spanning more than just one file. Be it experimental data, that should be stored together with a publication describing the experiment, or a computational model together with diagrams and metadata describing it in detail. [SED-ML](http://sed-ml.org), one of the [COMBINE Standards](http://co.mbine.org), started to develop a basic archive format that allowed storing a Simulation Experiment Description along with all computational models referenced. The [COMBINE archive](http://co.mbine.org/documents/archive) aims to broaden the scope. It still is a [ZIP Archive](http://en.wikipedia.org/wiki/Zip_(file_format)), but also features a manifest called `manifest.xml` that describes the contents of the archive. \r\n\r\n    <?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n    <omexManifest xmlns=\"http://identifiers.org/combine.specifications/omex-manifest\">\r\n      <content location=\"./manifest.xml\" format=\"http://identifiers.org/combine.specifications/omex-manifest\"/>\r\n      <content location=\"./model/model.xml\" format=\"http://identifiers.org/combine.specifications/sbml\"/>\r\n      <content location=\"./simulation.xml\" format=\"http://identifiers.org/combine.specifications/sedml\"/>\r\n      <content location=\"./article.pdf\" format=\"application/pdf\"/>\r\n      <content location=\"./metadata.rdf\" format=\"http://identifiers.org/combine.specifications/omex-metadata\"/>\r\n    </omexManifest>\r\n    \r\n## Third party libraries used\r\nThis project uses the following third party libraries: \r\n\r\n- [#ZipLib](http://www.icsharpcode.net/opensource/sharpziplib/)\r\n\r\n## License \r\nCopyright (c) 2013, Frank T. Bergmann  \r\nAll rights reserved.\r\n\r\nRedistribution and use in source and binary forms, with or without\r\nmodification, are permitted provided that the following conditions are met: \r\n\r\n1. Redistributions of source code must retain the above copyright notice, this\r\n   list of conditions and the following disclaimer. \r\n2. Redistributions in binary form must reproduce the above copyright notice,\r\n   this list of conditions and the following disclaimer in the documentation\r\n   and/or other materials provided with the distribution. \r\n\r\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\r\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\nON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}